# ==============================================================================
# FLAGENT BILLING CONFIGURATION EXAMPLE
# ==============================================================================
# Copy this file to .env and fill in your Stripe credentials

# ------------------------------------------------------------------------------
# STRIPE CONFIGURATION
# ------------------------------------------------------------------------------

# Enable Stripe billing integration
FLAGENT_STRIPE_ENABLED=true

# Stripe API Keys (get from https://dashboard.stripe.com/apikeys)
# IMPORTANT: Use test keys (sk_test_...) for development/testing
# Use live keys (sk_live_...) only in production
FLAGENT_STRIPE_SECRET_KEY=sk_test_51234567890abcdefghijklmnopqrstuvwxyz
FLAGENT_STRIPE_PUBLISHABLE_KEY=pk_test_51234567890abcdefghijklmnopqrstuvwxyz

# Webhook signing secret (get from https://dashboard.stripe.com/webhooks)
# Used to verify webhook signatures for security
FLAGENT_STRIPE_WEBHOOK_SECRET=whsec_1234567890abcdefghijklmnopqrstuvwxyz

# ------------------------------------------------------------------------------
# PRICING PLANS (Price IDs from Stripe)
# ------------------------------------------------------------------------------
# Create products and prices in Stripe Dashboard:
# https://dashboard.stripe.com/products

# Starter Plan ($9/month)
# STRIPE_PRICE_STARTER=price_1234567890starter

# Pro Plan ($99/month)
# STRIPE_PRICE_PRO=price_1234567890pro

# Enterprise Plan ($299/month)
# STRIPE_PRICE_ENTERPRISE=price_1234567890enterprise

# Metered usage price (evaluations)
# STRIPE_PRICE_METERED_EVALUATIONS=price_1234567890metered

# ------------------------------------------------------------------------------
# MULTI-TENANCY (Required for billing)
# ------------------------------------------------------------------------------

# Enable multi-tenancy for SaaS
FLAGENT_MULTI_TENANCY_ENABLED=true

# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ------------------------------------------------------------------------------

# Database driver (postgres recommended for production)
FLAGENT_DB_DBDRIVER=postgres

# PostgreSQL connection string
FLAGENT_DB_DBCONNECTIONSTR=postgresql://flagent:password@localhost:5432/flagent

# ------------------------------------------------------------------------------
# AUTHENTICATION (Required for billing API)
# ------------------------------------------------------------------------------

# JWT Authentication
FLAGENT_JWT_AUTH_ENABLED=true
FLAGENT_JWT_AUTH_SECRET=your-super-secret-jwt-key-change-this-in-production
FLAGENT_JWT_AUTH_SIGNING_METHOD=HS256

# ------------------------------------------------------------------------------
# SERVER CONFIGURATION
# ------------------------------------------------------------------------------

# Server host and port
HOST=0.0.0.0
PORT=18000

# Web prefix (optional)
# FLAGENT_WEB_PREFIX=/api/v1

# ------------------------------------------------------------------------------
# CORS CONFIGURATION
# ------------------------------------------------------------------------------

# Enable CORS
FLAGENT_CORS_ENABLED=true
FLAGENT_CORS_ALLOW_CREDENTIALS=true

# Allowed origins (comma-separated)
# Use "*" for development only!
# In production, specify exact origins
FLAGENT_CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourapp.com

# Allowed headers
FLAGENT_CORS_ALLOWED_HEADERS=Origin,Accept,Content-Type,X-Requested-With,Authorization,Time_Zone

# Allowed methods
FLAGENT_CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS

# ------------------------------------------------------------------------------
# LOGGING & MONITORING
# ------------------------------------------------------------------------------

# Log level (debug, info, warn, error)
FLAGENT_LOGRUS_LEVEL=info

# Log format (text or json)
FLAGENT_LOGRUS_FORMAT=json

# ------------------------------------------------------------------------------
# OPTIONAL: SENTRY ERROR TRACKING
# ------------------------------------------------------------------------------

# FLAGENT_SENTRY_ENABLED=true
# FLAGENT_SENTRY_DSN=https://...@sentry.io/...
# FLAGENT_SENTRY_ENVIRONMENT=production

# ------------------------------------------------------------------------------
# OPTIONAL: PROMETHEUS METRICS
# ------------------------------------------------------------------------------

# FLAGENT_STATSD_ENABLED=true
# FLAGENT_STATSD_HOST=localhost
# FLAGENT_STATSD_PORT=8125

# ==============================================================================
# STRIPE SETUP CHECKLIST
# ==============================================================================
# 
# [ ] 1. Create Stripe account (https://dashboard.stripe.com/register)
# [ ] 2. Get API keys from Dashboard → Developers → API keys
# [ ] 3. Create products and prices:
#        - Dashboard → Products → Add product
#        - Set name, description, pricing
#        - Copy price ID (price_...)
# [ ] 4. Configure webhook:
#        - Dashboard → Developers → Webhooks → Add endpoint
#        - Endpoint URL: https://yourapp.com/api/billing/webhook
#        - Events to send:
#          * checkout.session.completed
#          * customer.subscription.created
#          * customer.subscription.updated
#          * customer.subscription.deleted
#          * invoice.created
#          * invoice.updated
#          * invoice.paid
#          * invoice.payment_failed
#        - Copy signing secret (whsec_...)
# [ ] 5. Test with Stripe CLI:
#        brew install stripe/stripe-cli/stripe
#        stripe login
#        stripe listen --forward-to localhost:18000/api/billing/webhook
#        stripe trigger checkout.session.completed
# [ ] 6. Test checkout flow:
#        - Create checkout session via API
#        - Complete payment with test card (4242 4242 4242 4242)
#        - Verify webhook received
#        - Check subscription created
# [ ] 7. Go live:
#        - Replace test keys with live keys
#        - Update webhook to production URL
#        - Enable Stripe Radar for fraud prevention
#        - Set up monitoring and alerts
#
# ==============================================================================
# STRIPE TEST CARDS
# ==============================================================================
#
# Success:               4242 4242 4242 4242
# Requires 3D Secure:    4000 0025 0000 3155
# Declined:              4000 0000 0000 9995
# Insufficient funds:    4000 0000 0000 9995
# 
# Any future expiry date (e.g., 12/34)
# Any 3-digit CVC (e.g., 123)
# Any ZIP code
#
# More test cards: https://stripe.com/docs/testing
#
# ==============================================================================
