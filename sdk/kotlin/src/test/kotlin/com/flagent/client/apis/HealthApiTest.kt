/**
 *
 * Please note:
 * This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * Do not edit this file manually.
 *
 */

@file:Suppress(
    "ArrayInDataClass",
    "EnumEntryName",
    "RemoveRedundantQualifierName",
    "UnusedImport"
)

package com.flagent.client.apis

import io.kotest.matchers.shouldBe
import io.kotest.core.spec.style.ShouldSpec
import io.ktor.client.engine.mock.MockEngine
import io.ktor.client.engine.mock.respond
import io.ktor.http.HttpHeaders
import io.ktor.http.HttpStatusCode
import io.ktor.utils.io.ByteReadChannel
import kotlinx.coroutines.test.runTest

class HealthApiTest : ShouldSpec() {
    init {
        should("test getHealth") {
            runTest {
                val mockEngine = MockEngine {
                    respond(
                        content = ByteReadChannel("""{"status":"UP"}"""),
                        status = HttpStatusCode.OK,
                        headers = io.ktor.http.headersOf(HttpHeaders.ContentType, "application/json")
                    )
                }
                val apiInstance = HealthApi(baseUrl = "http://localhost", httpClientEngine = mockEngine)
                val response = apiInstance.getHealth()
                response.status shouldBe 200
                val body = response.body()
                body.status shouldBe "UP"
            }
        }

        should("test getInfo") {
            runTest {
                val mockEngine = MockEngine {
                    respond(
                        content = ByteReadChannel("""{"version":"1.0.0","buildTime":"2024-01-01","gitCommit":"abc123"}"""),
                        status = HttpStatusCode.OK,
                        headers = io.ktor.http.headersOf(HttpHeaders.ContentType, "application/json")
                    )
                }
                val apiInstance = HealthApi(baseUrl = "http://localhost", httpClientEngine = mockEngine)
                val response = apiInstance.getInfo()
                response.status shouldBe 200
                val body = response.body()
                body.version shouldBe "1.0.0"
                body.buildTime shouldBe "2024-01-01"
                body.gitCommit shouldBe "abc123"
            }
        }
    }
}
